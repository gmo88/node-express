<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fetch</title>
</head>
<body>
<h3>Front-end: make fetch() to perform <i>GET /users:</i></h3>
<button onclick="fetchUsers()">GET /users</button>
<div class="users"></div>

<h3>Front-end: make fetch() to perform <i>GET /pages/{page_num}:</i></h3>
<label>Input number:<input type="number" class="inputField" min="0" max="20"></label><br>
<button onclick="openPage()">GET /pages/{page_num}</button>
<div class="page"></div>

<script>
    let users = document.querySelector(".users");
    let page = document.querySelector(".page");

    function fetchUsers() {
        fetch('/users')
          .then(resp => resp.json())
          .then(jsonBody => jsonBody)
          .then(result => users.innerHTML = JSON.stringify(result))
          .catch(error => users.innerHTML = JSON.stringify(error));
    }

    function openPage(page_num) {
        page_num = document.querySelector(".inputField").value;
        // console.log("input", page_num);
        fetch(`/pages/${page_num}`)
          .then(resp => resp.json())
          .then(jsonBody => jsonBody)
          .then(result => {
              let renderHtml = `
<table>
<tr>Page id: ${result.page_id}</tr>
  <tr>
    <th>id</th> <th>Name</th> <th>Surname</th>
  </tr>
`;
              for (let i = 0; i < result.users.length; i++) {
                  renderHtml += `
  <tr>
    <td>${result.users[i].id}</td> <td>${result.users[i].name}</td> <td>${result.users[i].surname}</td>
  </tr>`;
              }
              renderHtml += `</table>`;
              page.innerHTML = renderHtml;
          })
          .catch(error => page.innerHTML = JSON.stringify(error));
    }

</script>
</body>
</html>